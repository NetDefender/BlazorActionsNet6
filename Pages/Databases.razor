@page "/Databases"
@inject IJSRuntime JSRuntime
@inject MessageService _message

<Divider Orientation="left"><h3>Sql Server</h3></Divider>
<Row>
    <Col Span="24">
        <Carousel Autoplay="TimeSpan.FromSeconds(30)" @ref="_carousel">
            <CarouselSlick>
                <h5>T-SQL</h5>
                <Row>
                    <Col Span="18">
                        <Comment Author="Scripting, Stored Procedures and CLR integration"
                                    Avatar="images/sql-server.png"
                                    Content="High Proficiency in scripting with the latest SQL Server version"
                                    Datetime="">
                            <Card>
                                <CardGrid Style="width:100%;" Hoverable="true">
                                    <AntList DataSource="@scripting" TItem="ProficiencyItem">
                                        <ListItem>
                                            <ListItemMeta Description=@context.Description>
                                                <TitleTemplate>
                                                    @context.Title
                                                </TitleTemplate>
                                            </ListItemMeta>
                                        </ListItem>
                                    </AntList>
                                </CardGrid>
                            </Card>
                        </Comment>
                    </Col>
                    <Col Span="6">
                        <Statistic Title="Level" Value="95" Precision="2" ValueStyle="color: #3f8600;" Suffix="%">
                            <PrefixTemplate>
                                <span><Icon Type="arrow-up" /></span>
                            </PrefixTemplate>
                        </Statistic>
                    </Col>
                </Row>
            </CarouselSlick>
            
            <CarouselSlick>
                <h5>Performance Optimizer</h5>
                <Row>
                    <Col Span="18">
                        <Comment Author="Research and Troubleshooting"
                                    Avatar="images/performance.png"
                                    Content="High Proficiency in Analysis and resolution of performance problems in database servers"
                                    Datetime="">
                            <Card>
                                <CardGrid Style="width:100%;" Hoverable="true">
                                    <AntList DataSource="@research" TItem="ProficiencyItem">
                                        <ListItem>
                                            <ListItemMeta Description=@context.Description>
                                                <TitleTemplate>
                                                    @context.Title
                                                </TitleTemplate>
                                            </ListItemMeta>
                                        </ListItem>
                                    </AntList>
                                </CardGrid>
                            </Card>
                        </Comment>
                    </Col>
                    <Col Span="6">
                        <Statistic Title="Level" Value="95" Precision="2" ValueStyle="color: #3f8600;" Suffix="%">
                            <PrefixTemplate>
                                <span><Icon Type="arrow-up" /></span>
                            </PrefixTemplate>
                        </Statistic>
                    </Col>
                </Row>
            </CarouselSlick>

            <CarouselSlick>
                <h5>Server Maintenance</h5>
                <Row>
                    <Col Span="18">
                        <Comment Author="Maintennance plans and Jobs"
                                    Avatar="images/tools.jpg"
                                    Content="High Proficiency in Sql Server maintenance plans and problem resolution"
                                    Datetime="">
                            <Card>
                                <CardGrid Style="width:100%;" Hoverable="true">
                                    <AntList DataSource="@maintenance" TItem="ProficiencyItem">
                                        <ListItem>
                                            <ListItemMeta Description=@context.Description>
                                                <TitleTemplate>
                                                    @context.Title
                                                </TitleTemplate>
                                            </ListItemMeta>
                                        </ListItem>
                                    </AntList>
                                </CardGrid>
                            </Card>
                        </Comment>
                    </Col>
                    <Col Span="6">
                        <Statistic Title="Level" Value="95" Precision="2" ValueStyle="color: #3f8600;" Suffix="%">
                            <PrefixTemplate>
                                <span><Icon Type="arrow-up" /></span>
                            </PrefixTemplate>
                        </Statistic>
                    </Col>
                </Row>
            </CarouselSlick>

            <CarouselSlick>
                <h5>Indexing</h5>
                <Row>
                    <Col Span="18">
                        <Comment Author="Indexing strategies"
                                    Avatar="images/sql-server.png"
                                    Content="High Proficiency in Sql Server indexing strategies"
                                    Datetime="">
                            <Card>
                                <CardGrid Style="width:100%;" Hoverable="true">
                                    <AntList DataSource="@indexes" TItem="ProficiencyItem">
                                        <ListItem>
                                            <ListItemMeta Description=@context.Description>
                                                <TitleTemplate>
                                                    @context.Title
                                                </TitleTemplate>
                                            </ListItemMeta>
                                        </ListItem>
                                    </AntList>
                                </CardGrid>
                            </Card>
                        </Comment>
                    </Col>
                    <Col Span="6">
                        <Statistic Title="Level" Value="95" Precision="2" ValueStyle="color: #3f8600;" Suffix="%">
                            <PrefixTemplate>
                                <span><Icon Type="arrow-up" /></span>
                            </PrefixTemplate>
                        </Statistic>
                    </Col>
                </Row>
            </CarouselSlick>
        </Carousel>
    </Col>
</Row>
<Row>
    <Col Span="24">
        <div class="button-container">
            <Button Type="primary" OnClick="@( _=>{_carousel.Previous();_message.Success("Previous information slide", 10);})" Size="Large" Shape="@ButtonShape.Round">Previous</Button>
            <Button Type="primary" OnClick="@( _=>{_carousel.Next();_message.Success("Next information slide", 10);})" Size="Large" Shape="@ButtonShape.Round">Next</Button>
        </div>
    </Col>
</Row>

<style>
    .button-container {
        display: flex;
        justify-content: space-between;
        padding-top:4px;
    }
</style>

@code{
    private Carousel _carousel;

    private readonly RenderFragment tSqlAvatar = @<Avatar Src="images/tsql.gif"></Avatar>;
    private readonly RenderFragment researchAvatar = @<Avatar Src="images/research.gif"></Avatar>;
    private readonly RenderFragment maintenanceAvatar = @<Avatar Src="images/maintenance.gif"></Avatar>;
    private readonly RenderFragment indexesAvatar = @<Avatar Src="images/indexes.gif"></Avatar>;

    private readonly ProficiencyItem[] scripting = new ProficiencyItem[]{
        new ProficiencyItem("Data Manipulation Language (DML)", string.Empty),
        new ProficiencyItem("Data Definition Language (DDL)", string.Empty),
        new ProficiencyItem("Data Control Language (DCL)", string.Empty),
        new ProficiencyItem("Transaction Control Language (TCL)", string.Empty),
        new ProficiencyItem("Stored Procedures", string.Empty),
        new ProficiencyItem("Functions", string.Empty),
        new ProficiencyItem("Views", string.Empty),
        new ProficiencyItem("Aggregates", string.Empty),
        new ProficiencyItem("CLR data types (FileStream, HierarchyId) and JSON data type", string.Empty),
    };

    private readonly ProficiencyItem[] research = new ProficiencyItem[]{
        new ProficiencyItem("Execution Plan evaluation", string.Empty),
        new ProficiencyItem("PerfMon", string.Empty),
        new ProficiencyItem("Sql Server Profiler", string.Empty),
        new ProficiencyItem("Sql Server Logs", string.Empty),
        new ProficiencyItem("AWS CloudWatch", string.Empty),
    };

    private readonly ProficiencyItem[] maintenance = new ProficiencyItem[]{
        new ProficiencyItem("Sql Server Agent", string.Empty),
        new ProficiencyItem("Sql Server Jobs", string.Empty),
        new ProficiencyItem("Extended Events", string.Empty),
    };

    private readonly ProficiencyItem[] indexes = new ProficiencyItem[]{
        new ProficiencyItem("Clustered/NonClustered Indexes", string.Empty),
        new ProficiencyItem("ColumnStore Indexes", string.Empty),
        new ProficiencyItem("XML Indexes", string.Empty),
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);
        await JSRuntime.InvokeVoidAsync("highlightSnippets");
    }
}